<!-- Start Products  -->
<div class="products-box">
  <div class="container" *ngFor="let category of categories">
    <div
      *ngIf="_.filter(products, ['productCategoryId', category.id]).length > 0"
      style="margin-bottom: 10px;"
    >
      <div class="row justify-content-between border-bottom">
        <div class="col-lg-3-fix col-md-3 col-sm-3 col-xs-12">
          <div class="title-all">
            <h1 [innerHTML]="category.name"></h1>
            <!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sit amet lacus enim.</p> -->
          </div>
          <div class="title_top_menu_index"></div>
        </div>
        <div
          class="col-lg-2 col-md-2 col-sm-2 col-xs-12"
          *ngIf="
            _.filter(products, ['productCategoryId', category.id]).length > 4
          "
        >
          <button class="title-all btn hvr-hover text-white float-right" (click)="viewMore(category.id)">
            Xem thêm <fa-icon icon="caret-right"></fa-icon>
          </button>
        </div>
      </div>
      <!-- <div class="row">
            <div class="col-lg-12">
                <div class="special-menu text-center">
                    <div class="button-group filter-button-group">
                        <button class="active" data-filter="*">All</button>
                        <button data-filter=".top-featured">Top featured</button>
                        <button data-filter=".best-seller">Best seller</button>
                    </div>
                </div>
            </div>
        </div> -->

      <div class="row special-list">
        <div
          class="col-lg-3 col-md-3 col-sm-3 col-xs-3 special-grid"
          *ngFor="
            let product of _.slice(
              _.orderBy(
                _.filter(products, ['productCategoryId', category.id]),
                ['createdAt', 'updatedAt'],
                ['desc', 'desc']
              ),
              0,
              4
            )
          "
        >
          <div class="products-single fix">
            <div class="box-img-hover">
              <div class="type-lb">
                <p class="sale" *ngIf="product.onSale && product.salePrice > 0">
                  Sale
                </p>
              </div>
              <img
                [src]="getFileSrc(product.image)"
                class="img-fluid"
                [alt]="product.name"
                style="height: 240px; object-fit: cover"
              />
              <div class="mask-icon">
                <ul>
                  <li>
                    <a
                      [href]="'/san-pham/' + product.id"
                      data-toggle="tooltip"
                      data-placement="right"
                      title="Xem sản phẩm"
                      ><fa-icon icon="eye"></fa-icon
                    ></a>
                  </li>
                  <!-- <li>
                    <a
                      href="#"
                      data-toggle="tooltip"
                      data-placement="right"
                      title="Compare"
                      ><fa-icon icon="sync-alt"></fa-icon
                    ></a>
                  </li>
                  <li>
                    <a
                      href="#"
                      data-toggle="tooltip"
                      data-placement="right"
                      title="Add to Wishlist"
                      ><fa-icon icon="heart"></fa-icon
                    ></a>
                  </li> -->
                </ul>
                <a class="btn cart" (click)="addProduct(product.id)"
                  ><fa-icon icon="shopping-cart"></fa-icon> Thêm vào giỏ</a
                >
              </div>
            </div>
            <div class="why-text">
              <a [href]="'/san-pham/' + product.id">
                <h4 [innerHTML]="product.name"></h4>
                <h5 *ngIf="product.onSale">
                  <del>{{ product.salePrice | mask: "separator":"," }}đ</del>
                  {{ product.price | mask: "separator":"," }}đ
                </h5>
                <h5 *ngIf="!product.onSale">
                  {{ product.price | mask: "separator":"," }}đ
                </h5>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End Products  -->

<!-- Start Blog  -->
<!-- <div class="latest-blog">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="title-all text-center">
          <h1>latest blog</h1>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sit
            amet lacus enim.
          </p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 col-lg-4 col-xl-4">
        <div class="blog-box">
          <div class="blog-img">
            <img class="img-fluid" src="assets/images/blog-img.jpg" alt="" />
          </div>
          <div class="blog-content">
            <div class="title-blog">
              <h3>Fusce in augue non nisi fringilla</h3>
              <p>
                Nulla ut urna egestas, porta libero id, suscipit orci. Quisque
                in lectus sit amet urna dignissim feugiat. Mauris molestie
                egestas pharetra. Ut finibus cursus nunc sed mollis. Praesent
                laoreet lacinia elit id lobortis.
              </p>
            </div>
            <ul class="option-blog">
              <li>
                <a href="#"><fa-icon icon="heart"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="eye"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="comments"></fa-icon></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-4 col-xl-4">
        <div class="blog-box">
          <div class="blog-img">
            <img class="img-fluid" src="assets/images/blog-img-01.jpg" alt="" />
          </div>
          <div class="blog-content">
            <div class="title-blog">
              <h3>Fusce in augue non nisi fringilla</h3>
              <p>
                Nulla ut urna egestas, porta libero id, suscipit orci. Quisque
                in lectus sit amet urna dignissim feugiat. Mauris molestie
                egestas pharetra. Ut finibus cursus nunc sed mollis. Praesent
                laoreet lacinia elit id lobortis.
              </p>
            </div>
            <ul class="option-blog">
              <li>
                <a href="#"><fa-icon icon="heart"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="eye"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="comments"></fa-icon></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-4 col-xl-4">
        <div class="blog-box">
          <div class="blog-img">
            <img class="img-fluid" src="assets/images/blog-img-02.jpg" alt="" />
          </div>
          <div class="blog-content">
            <div class="title-blog">
              <h3>Fusce in augue non nisi fringilla</h3>
              <p>
                Nulla ut urna egestas, porta libero id, suscipit orci. Quisque
                in lectus sit amet urna dignissim feugiat. Mauris molestie
                egestas pharetra. Ut finibus cursus nunc sed mollis. Praesent
                laoreet lacinia elit id lobortis.
              </p>
            </div>
            <ul class="option-blog">
              <li>
                <a href="#"><fa-icon icon="heart"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="eye"></fa-icon></a>
              </li>
              <li>
                <a href="#"><fa-icon icon="comments"></fa-icon></a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->
<!-- End Blog  -->
